(function(){var b=$('<div id="galleryOverlay">'),d=$('<div id="gallerySlider">'),e=$('<a id="prevArrow"></a>'),c=$('<a id="nextArrow"></a>'),a=false;$.fn.touchTouch=function(){var n=$([]),l=0,m=this;b.hide().appendTo("body");d.appendTo(b);m.each(function(){n=n.add($('<div class="placeholder">'))});d.append(n).on("click",function(q){if(!$(q.target).is("img")){g()}});$("body").on("touchstart","#gallerySlider img",function(r){var s=r.originalEvent,q=s.changedTouches[0].pageX;d.on("touchmove",function(t){t.preventDefault();s=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];if(s.pageX-q>10){d.off("touchmove");f()}else{if(s.pageX-q<-10){d.off("touchmove");i()}}});return false}).on("touchend",function(){d.off("touchmove")});m.on("click",function(q){q.preventDefault();l=m.index(this);j(l);p(l);o(l+1);o(l-1)});if(!("ontouchstart" in window)){b.append(e).append(c);e.click(function(q){q.preventDefault();f()});c.click(function(q){q.preventDefault();i()})}$(window).bind("keydown",function(q){if(q.keyCode==37){f()}else{if(q.keyCode==39){i()}}});function j(q){if(a){return false}b.show();setTimeout(function(){b.addClass("visible")},100);k(q);a=true}function g(){if(!a){return false}b.hide().removeClass("visible");a=false}function k(q){d.css("left",(-q*100)+"%")}function o(q){setTimeout(function(){p(q)},1000)}function p(q){if(q<0||q>=m.length){return false}h(m.eq(q).attr("href"),function(){n.eq(q).html(this)})}function h(r,s){var q=$("<img>").on("load",function(){s.call(q)});q.attr("src",r)}function i(){if(l+1<m.length){l++;k(l);o(l+1)}else{d.addClass("rightSpring");setTimeout(function(){d.removeClass("rightSpring")},500)}}function f(){if(l>0){l--;k(l);o(l-1)}else{d.addClass("leftSpring");setTimeout(function(){d.removeClass("leftSpring")},500)}}}})(jQuery);